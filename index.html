<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Motoboy Manager</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./styles.css" />
</head>

<body>
  <!-- Topbar -->
  <header class="topbar" id="topbar">
    <div class="brand">
      <div class="dot"></div>
      <div class="brandText">
        <div>Motoboy Manager</div>
        <div class="sub" id="topbarSub">Operação</div>
      </div>
    </div>

    <div class="topbarRight">
      <div class="topInfo" id="topInfo"></div>
      <div class="winBtns">
        <button class="winBtn" id="btnMin" title="Minimizar"><span class="glyph g-min"></span></button>
        <button class="winBtn" id="btnMax" title="Maximizar"><span class="glyph g-max"></span></button>
        <button class="winBtn close" id="btnClose" title="Fechar"><span class="glyph g-close"></span></button>
      </div>
    </div>
  </header>

  <main class="wrap">
    <div class="appGrid">

      <!-- Sidebar -->
      <aside class="panel">
        <div class="panelInner">
          <div class="navUser" id="navUser">
            <div class="email" id="navEmail">—</div>
            <div class="meta" id="navMeta">Deslogado</div>
            <div class="badge warn" id="licenseBadge">Licença: não definida</div>
          </div>

          <nav class="nav" style="margin-top:12px;">
            <button class="navBtn active" data-view="operacao">
              <span>Operação</span><small>Pedidos por motoboy</small>
            </button>
            <button class="navBtn" data-view="motoboys">
              <span>Motoboys</span><small>Cadastro e edição</small>
            </button>
            <button class="navBtn" data-view="stats" data-requires="L2">
              <span>Estatísticas</span><small>Nível 2</small>
            </button>
            <button class="navBtn" data-view="historico" data-requires="L2">
              <span>Histórico</span><small>Nível 2</small>
            </button>
            <button class="navBtn" data-view="config">
              <span>Config</span><small>Conta & Licença</small>
            </button>
            <div class="divider"></div>
            <button class="navBtn" data-view="auth">
              <span>Login</span><small>Entrar/Criar/Redefinir</small>
            </button>
          </nav>

          <div class="sideHelp">
            <div class="sideHelpTitle">Atalhos rápidos</div>
            <div class="sideHelpText">
              • <b>DEMO-N1</b> = libera Operação/Motoboys<br />
              • <b>DEMO-N2</b> = libera Estatísticas/Histórico/Backup/CSV<br />
              (Validador já pronto pra evoluir depois)
            </div>
          </div>
        </div>
      </aside>

      <!-- Content -->
      <section class="panel">
        <div class="panelInner">

          <!-- VIEW: AUTH -->
          <section class="view" id="view-auth">
            <h2 class="hTitle">Acesso</h2>
            <p class="hSub">Login, criar conta e redefinir senha (funcionando).</p>

            <div class="card">
              <div class="tabs">
                <button class="tab active" data-tab="login">Login</button>
                <button class="tab" data-tab="signup">Criar conta</button>
                <button class="tab" data-tab="reset">Redefinir senha</button>
              </div>

              <div class="tabView active" id="tab-login">
                <div class="grid2">
                  <div>
                    <label>E-mail</label>
                    <input id="loginEmail" placeholder="seu@email.com" autocomplete="email" />
                  </div>
                  <div>
                    <label>Senha</label>
                    <input id="loginPass" placeholder="••••••••" type="password" autocomplete="current-password" />
                  </div>
                </div>
                <div class="row end">
                  <button class="btn primary" id="btnLogin">Entrar</button>
                </div>
              </div>

              <div class="tabView" id="tab-signup">
                <div class="grid2">
                  <div>
                    <label>E-mail</label>
                    <input id="signupEmail" placeholder="seu@email.com" autocomplete="email" />
                  </div>
                  <div>
                    <label>Senha</label>
                    <input id="signupPass" placeholder="Crie uma senha" type="password" autocomplete="new-password" />
                  </div>
                </div>
                <div class="row end">
                  <button class="btn primary" id="btnSignup">Criar conta</button>
                </div>
              </div>

              <div class="tabView" id="tab-reset">
                <div class="grid2">
                  <div>
                    <label>E-mail</label>
                    <input id="resetEmail" placeholder="seu@email.com" autocomplete="email" />
                  </div>
                  <div>
                    <label>Nova senha</label>
                    <input id="resetPass" placeholder="Nova senha" type="password" autocomplete="new-password" />
                  </div>
                </div>
                <div class="row end">
                  <button class="btn primary" id="btnResetPass">Redefinir</button>
                </div>

                <div class="note">
                  * Aqui é offline/demonstração: redefine direto no app.
                </div>
              </div>
            </div>
          </section>

          <!-- VIEW: CONFIG -->
          <section class="view" id="view-config">
            <h2 class="hTitle">Config</h2>
            <p class="hSub">Conta, licença e preferências.</p>

            <div class="grid2">
              <div class="card">
                <h3 class="cardTitle">Conta</h3>
                <div class="row">
                  <div class="grow">
                    <div class="kv">
                      <span>Usuário</span>
                      <b id="cfgUser">—</b>
                    </div>
                    <div class="kv">
                      <span>Status</span>
                      <b id="cfgStatus">Deslogado</b>
                    </div>
                  </div>
                </div>
                <div class="row end">
                  <button class="btn" id="btnGoAuth">Ir pro Login</button>
                  <button class="btn danger" id="btnLogout">Sair</button>
                </div>
              </div>

              <div class="card">
                <h3 class="cardTitle">Licença</h3>
                <div class="row">
                  <div class="grow">
                    <label>Chave</label>
                    <input id="licenseKey" placeholder="Ex: DEMO-N2" />
                    <div class="note">
                      Nível 1 libera Operação/Motoboys. Nível 2 libera Estatísticas/Histórico/Backup/CSV.
                    </div>
                  </div>
                </div>
                <div class="row end">
                  <button class="btn primary" id="btnApplyLicense">Aplicar</button>
                </div>
              </div>
            </div>
          </section>

          <!-- VIEW: MOTOBOYS -->
          <section class="view" id="view-motoboys">
            <h2 class="hTitle">Motoboys</h2>
            <p class="hSub">Adicionar, editar e remover motoboys.</p>

            <div class="card">
              <div class="grid2">
                <div>
                  <label>Nome do motoboy</label>
                  <input id="mbName" placeholder="Ex: João" />
                </div>
                <div>
                  <label>Identificador (opcional)</label>
                  <input id="mbTag" placeholder="Ex: 01 / Placa / Apelido" />
                </div>
              </div>
              <div class="row end">
                <button class="btn primary" id="btnAddMotoboy">Adicionar motoboy</button>
              </div>
            </div>

            <div class="card">
              <h3 class="cardTitle">Lista</h3>
              <div id="motoboysList" class="list"></div>
            </div>
          </section>

          <!-- VIEW: OPERACAO -->
          <section class="view active" id="view-operacao">
            <div class="boardTop">
              <div>
                <h2 class="hTitle">Operação</h2>
                <p class="hSub">Adicionar vários pedidos (plataforma automática) e acompanhar por motoboy.</p>
              </div>

              <div class="actions">
                <div class="pill"><span>Motoboys:</span> <strong id="pillMotoboys">0</strong></div>
                <div class="pill"><span>Pedidos:</span> <strong id="pillPedidos">0</strong></div>
                <button class="btn" id="btnExportJSON" data-requires="L2">Backup (JSON)</button>
                <button class="btn" id="btnExportCSV" data-requires="L2">Exportar CSV</button>
              </div>
            </div>

            <!-- Toolbar (dia + adicionar vários) -->
            <div class="card toolbarCard">
              <div class="toolbarTop">
                <div class="dayChip">
                  <span class="dayLabel">Filtrar dia</span>
                  <input type="date" id="dayFilter" class="dateInput" />
                  <button class="miniBtn gold" id="btnDayToday" title="Hoje">↩</button>
                  <button class="miniBtn" id="btnDayClear" title="Sem filtro">∞</button>
                </div>

                <div class="smallMeta">
                  <span id="dayCaption">—</span>
                </div>
              </div>

              <div class="gridAdd">
                <div class="codesBox">
                  <div class="codesHead">
                    <div class="codesTitle">Códigos do pedido</div>
                    <div class="codesCount"><span id="batchCount">0</span> código(s)</div>
                  </div>
                  <textarea id="batchCodes" placeholder="Um por linha (ou cole vários)…&#10;Ex:&#10;1234&#10;123&#10;123456"></textarea>
                  <div class="codesHint">Separadores aceitos: quebra de linha, vírgula, espaço</div>
                </div>

                <div>
                  <label>Pagamento</label>
                  <div class="selectWrap">
                    <select id="batchPay">
                      <option value="PIX">PIX</option>
                      <option value="Cartão">Cartão</option>
                      <option value="Dinheiro">Dinheiro</option>
                    </select>
                  </div>

                  <label style="margin-top:12px;">Motoboy</label>
                  <div class="selectWrap">
                    <select id="batchMotoboy"></select>
                  </div>

                  <div class="row end" style="margin-top:14px;">
                    <button class="btn" id="btnBatchClear">Limpar</button>
                    <button class="btn primary" id="btnBatchAdd">Adicionar pedido(s)</button>
                  </div>
                </div>
              </div>
            </div>

            <div class="board" id="board"></div>
          </section>

          <!-- VIEW: STATS -->
          <section class="view" id="view-stats">
            <h2 class="hTitle">Estatísticas</h2>
            <p class="hSub">Nível 2: resumo por motoboy e pagamentos.</p>

            <div class="grid2">
              <div class="card">
                <h3 class="cardTitle">Por motoboy (finalizados)</h3>
                <div id="statsByMotoboy" class="list"></div>
              </div>
              <div class="card">
                <h3 class="cardTitle">Por pagamento (finalizados)</h3>
                <div id="statsByPay" class="list"></div>
              </div>
            </div>
          </section>

          <!-- VIEW: HISTORICO -->
          <section class="view" id="view-historico">
            <h2 class="hTitle">Histórico</h2>
            <p class="hSub">Nível 2: pedidos finalizados.</p>

            <div class="card">
              <div class="grid2">
                <div>
                  <label>Buscar por código</label>
                  <input id="histSearch" placeholder="Ex: 1234" />
                </div>
                <div class="row end" style="align-self:end;">
                  <button class="btn" id="btnHistClear">Limpar busca</button>
                </div>
              </div>
            </div>

            <div class="card">
              <h3 class="cardTitle">Lista</h3>
              <div id="histList" class="list"></div>
            </div>
          </section>

        </div>
      </section>

    </div>
  </main>

  <!-- Toast -->
  <div class="toastWrap" id="toastWrap"></div>

  <!-- Modal Confirm -->
  <div class="modalBack" id="modalBack" aria-hidden="true">
    <div class="modal">
      <div class="modalTitle" id="modalTitle">Confirmar</div>
      <div class="modalText" id="modalText">Tem certeza?</div>
      <div class="modalActions">
        <button class="btn ghost" id="modalCancel">Cancelar</button>
        <button class="btn danger" id="modalOk">Confirmar</button>
      </div>
    </div>
  </div>

  <script type="module" src="./app.js"></script>
</body>
</html>
